// seed-data.js
const { Client } = require('pg');
require('dotenv').config();

const sampleRoomies = [
  {
    id: "1",
    name: "Josu√© Chaves",
    age: 28,
    avatar: "https://randomuser.me/api/portraits/men/1.jpg",
    verified: true,
    rating: 4.5,
    reviews: 12,
    location: "San Jos√©, Costa Rica",
    hasApartment: true,
    budget: { min: 300, max: 600 },
    bio: "Apasionado por la tecnolog√≠a y desarrollo de software. Me gusta mantener mi espacio limpio y ordenado.",
    interests: ["Cocina", "Deportes", "Lectura", "Viajes", "M√∫sica"],
    occupation: "Ingeniero en Computaci√≥n",
    socialLevel: 4,
    cleanlinessLevel: 5,
    acceptsSmokers: true,
    acceptsPets: false,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=1", "https://picsum.photos/400/300?random=2"]
  },
  {
    id: "2",
    name: "Mar√≠a L√≥pez",
    age: 25,
    avatar: "https://randomuser.me/api/portraits/women/2.jpg",
    verified: false,
    rating: 4.0,
    reviews: 8,
    location: "Alajuela, Costa Rica",
    hasApartment: false,
    budget: { min: 250, max: 500 },
    bio: "Amante de los animales y la naturaleza. Busco un lugar tranquilo y ordenado.",
    interests: ["Yoga", "Viajes", "Fotograf√≠a", "Cine"],
    occupation: "Dise√±adora Gr√°fica",
    socialLevel: 3,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: false,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=3", "https://picsum.photos/400/300?random=4"]
  },
  {
    id: "3",
    name: "Carlos Fern√°ndez",
    age: 30,
    avatar: "https://randomuser.me/api/portraits/men/3.jpg",
    verified: true,
    rating: 4.8,
    reviews: 20,
    location: "Heredia, Costa Rica",
    hasApartment: true,
    budget: { min: 400, max: 700 },
    bio: "Ingeniero de software. Me gusta la m√∫sica y hacer deporte en mi tiempo libre.",
    interests: ["M√∫sica", "Deportes", "Videojuegos"],
    occupation: "Ingeniero de Software",
    socialLevel: 4,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s", "Portugu√©s"],
    photos: ["https://picsum.photos/400/300?random=5", "https://picsum.photos/400/300?random=6"]
  },
  {
    id: "4",
    name: "Ana Rodr√≠guez",
    age: 27,
    avatar: "https://randomuser.me/api/portraits/women/4.jpg",
    verified: false,
    rating: 3.9,
    reviews: 5,
    location: "Cartago, Costa Rica",
    hasApartment: false,
    budget: { min: 200, max: 450 },
    bio: "Me encanta leer y cocinar. Busco un ambiente tranquilo y amigable.",
    interests: ["Lectura", "Cocina", "Arte", "Viajes"],
    occupation: "Profesora",
    socialLevel: 3,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=7"]
  },
  {
    id: "5",
    name: "Luis G√≥mez",
    age: 32,
    avatar: "https://randomuser.me/api/portraits/men/5.jpg",
    verified: true,
    rating: 4.7,
    reviews: 15,
    location: "Puntarenas, Costa Rica",
    hasApartment: true,
    budget: { min: 350, max: 650 },
    bio: "Apasionado por los deportes y la tecnolog√≠a. Me gusta mantener todo organizado.",
    interests: ["Deportes", "Tecnolog√≠a", "Cine", "Viajes"],
    occupation: "Arquitecto",
    socialLevel: 4,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=8", "https://picsum.photos/400/300?random=9"]
  },
  {
    id: "6",
    name: "Sof√≠a M√©ndez",
    age: 24,
    avatar: "https://randomuser.me/api/portraits/women/6.jpg",
    verified: true,
    rating: 4.3,
    reviews: 10,
    location: "San Jos√©, Costa Rica",
    hasApartment: false,
    budget: { min: 280, max: 550 },
    bio: "Estudiante de dise√±o gr√°fico, creativa y organizada.",
    interests: ["Arte", "M√∫sica", "Cine", "Fotograf√≠a"],
    occupation: "Estudiante",
    socialLevel: 3,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=10"]
  },
  {
    id: "7",
    name: "Andr√©s Castillo",
    age: 29,
    avatar: "https://randomuser.me/api/portraits/men/7.jpg",
    verified: false,
    rating: 4.1,
    reviews: 7,
    location: "Heredia, Costa Rica",
    hasApartment: true,
    budget: { min: 300, max: 600 },
    bio: "Trabajo en marketing digital. Me gusta el ejercicio y cocinar.",
    interests: ["Gimnasio", "Cocina", "Viajes", "Series"],
    occupation: "Marketing Digital",
    socialLevel: 4,
    cleanlinessLevel: 3,
    acceptsSmokers: true,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=11", "https://picsum.photos/400/300?random=12"]
  },
  {
    id: "8",
    name: "Gabriela Rojas",
    age: 26,
    avatar: "https://randomuser.me/api/portraits/women/8.jpg",
    verified: true,
    rating: 4.6,
    reviews: 14,
    location: "Cartago, Costa Rica",
    hasApartment: false,
    budget: { min: 250, max: 500 },
    bio: "Soy maestra y disfruto mucho la lectura y el cine.",
    interests: ["Lectura", "Cine", "Yoga", "Naturaleza"],
    occupation: "Maestra",
    socialLevel: 3,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: false,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=13"]
  },
  {
    id: "9",
    name: "Daniel Vargas",
    age: 31,
    avatar: "https://randomuser.me/api/portraits/men/9.jpg",
    verified: true,
    rating: 4.7,
    reviews: 18,
    location: "Alajuela, Costa Rica",
    hasApartment: true,
    budget: { min: 400, max: 750 },
    bio: "Ingeniero civil. Me gustan los deportes y la m√∫sica.",
    interests: ["Deportes", "M√∫sica", "Viajes", "Cocina"],
    occupation: "Ingeniero Civil",
    socialLevel: 4,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=14", "https://picsum.photos/400/300?random=15"]
  },
  {
    id: "10",
    name: "Valeria Jim√©nez",
    age: 23,
    avatar: "https://randomuser.me/api/portraits/women/10.jpg",
    verified: false,
    rating: 3.8,
    reviews: 6,
    location: "Puntarenas, Costa Rica",
    hasApartment: false,
    budget: { min: 200, max: 400 },
    bio: "Me encantan los animales y la vida tranquila cerca de la playa.",
    interests: ["Surf", "Naturaleza", "Fotograf√≠a", "Cocina"],
    occupation: "Fot√≥grafa",
    socialLevel: 3,
    cleanlinessLevel: 3,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=16"]
  },
  {
    id: "11",
    name: "Ricardo Morales",
    age: 27,
    avatar: "https://randomuser.me/api/portraits/men/11.jpg",
    verified: true,
    rating: 4.4,
    reviews: 12,
    location: "San Jos√©, Costa Rica",
    hasApartment: true,
    budget: { min: 350, max: 600 },
    bio: "Programador freelance, tranquilo y responsable.",
    interests: ["Tecnolog√≠a", "Videojuegos", "Cine", "M√∫sica"],
    occupation: "Freelancer",
    socialLevel: 3,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=17", "https://picsum.photos/400/300?random=18"]
  },
  {
    id: "12",
    name: "Laura Herrera",
    age: 28,
    avatar: "https://randomuser.me/api/portraits/women/12.jpg",
    verified: false,
    rating: 4.0,
    reviews: 9,
    location: "Heredia, Costa Rica",
    hasApartment: false,
    budget: { min: 300, max: 550 },
    bio: "Apasionada por la cocina y la lectura.",
    interests: ["Cocina", "Lectura", "Viajes", "Arte"],
    occupation: "Chef",
    socialLevel: 3,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=19"]
  },
  {
    id: "13",
    name: "Jos√© Ram√≠rez",
    age: 33,
    avatar: "https://randomuser.me/api/portraits/men/13.jpg",
    verified: true,
    rating: 4.9,
    reviews: 21,
    location: "Cartago, Costa Rica",
    hasApartment: true,
    budget: { min: 450, max: 800 },
    bio: "M√©dico general, responsable y ordenado.",
    interests: ["Deportes", "Viajes", "Lectura", "Cine"],
    occupation: "M√©dico",
    socialLevel: 4,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: false,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=20", "https://picsum.photos/400/300?random=21"]
  },
  {
    id: "14",
    name: "Camila Soto",
    age: 26,
    avatar: "https://randomuser.me/api/portraits/women/14.jpg",
    verified: true,
    rating: 4.5,
    reviews: 11,
    location: "San Jos√©, Costa Rica",
    hasApartment: false,
    budget: { min: 270, max: 500 },
    bio: "Trabajo en moda, me gusta la fotograf√≠a y el dise√±o.",
    interests: ["Fotograf√≠a", "Arte", "M√∫sica", "Yoga"],
    occupation: "Dise√±adora de Moda",
    socialLevel: 4,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=22"]
  },
  {
    id: "15",
    name: "Felipe Navarro",
    age: 29,
    avatar: "https://randomuser.me/api/portraits/men/15.jpg",
    verified: false,
    rating: 3.7,
    reviews: 5,
    location: "Alajuela, Costa Rica",
    hasApartment: false,
    budget: { min: 250, max: 480 },
    bio: "Estudiante de arquitectura, creativo y sociable.",
    interests: ["Arquitectura", "Deportes", "Cine", "Viajes"],
    occupation: "Estudiante",
    socialLevel: 4,
    cleanlinessLevel: 3,
    acceptsSmokers: true,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=23"]
  },
  {
    id: "16",
    name: "Natalia Vega",
    age: 27,
    avatar: "https://randomuser.me/api/portraits/women/16.jpg",
    verified: true,
    rating: 4.6,
    reviews: 13,
    location: "Heredia, Costa Rica",
    hasApartment: true,
    budget: { min: 320, max: 600 },
    bio: "Amante de los animales y el senderismo.",
    interests: ["Naturaleza", "Deportes", "Viajes", "Lectura"],
    occupation: "Veterinaria",
    socialLevel: 4,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=24", "https://picsum.photos/400/300?random=25"]
  },
  {
    id: "17",
    name: "Javier Pineda",
    age: 30,
    avatar: "https://randomuser.me/api/portraits/men/17.jpg",
    verified: true,
    rating: 4.2,
    reviews: 9,
    location: "Cartago, Costa Rica",
    hasApartment: true,
    budget: { min: 370, max: 650 },
    bio: "Analista financiero, responsable y tranquilo.",
    interests: ["Cine", "M√∫sica", "Deportes", "Viajes"],
    occupation: "Analista Financiero",
    socialLevel: 3,
    cleanlinessLevel: 5,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: false,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=26"]
  },
  {
    id: "18",
    name: "Isabella Mora",
    age: 24,
    avatar: "https://randomuser.me/api/portraits/women/18.jpg",
    verified: false,
    rating: 3.9,
    reviews: 6,
    location: "Puntarenas, Costa Rica",
    hasApartment: false,
    budget: { min: 200, max: 420 },
    bio: "Estudiante de turismo, me encanta conocer nuevas culturas.",
    interests: ["Viajes", "Naturaleza", "M√∫sica", "Cine"],
    occupation: "Estudiante",
    socialLevel: 4,
    cleanlinessLevel: 3,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=27"]
  },
  {
    id: "19",
    name: "Diego Le√≥n",
    age: 32,
    avatar: "https://randomuser.me/api/portraits/men/19.jpg",
    verified: true,
    rating: 4.8,
    reviews: 16,
    location: "San Jos√©, Costa Rica",
    hasApartment: true,
    budget: { min: 400, max: 700 },
    bio: "Consultor en tecnolog√≠a, ordenado y social.",
    interests: ["Tecnolog√≠a", "Deportes", "Cocina", "Viajes"],
    occupation: "Consultor TI",
    socialLevel: 4,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=28", "https://picsum.photos/400/300?random=29"]
  },
  {
    id: "20",
    name: "Fernanda Araya",
    age: 25,
    avatar: "https://randomuser.me/api/portraits/women/20.jpg",
    verified: true,
    rating: 4.4,
    reviews: 12,
    location: "Alajuela, Costa Rica",
    hasApartment: false,
    budget: { min: 250, max: 500 },
    bio: "Dise√±adora de interiores, creativa y amigable.",
    interests: ["Arte", "Dise√±o", "M√∫sica", "Yoga"],
    occupation: "Dise√±adora de Interiores",
    socialLevel: 4,
    cleanlinessLevel: 4,
    acceptsSmokers: false,
    acceptsPets: false,
    acceptsGuests: true,
    languages: ["Espa√±ol", "Ingl√©s"],
    photos: ["https://picsum.photos/400/300?random=30"]
  },
  {
    id: "21",
    name: "Mauricio Sol√≠s",
    age: 28,
    avatar: "https://randomuser.me/api/portraits/men/21.jpg",
    verified: false,
    rating: 4.0,
    reviews: 8,
    location: "Heredia, Costa Rica",
    hasApartment: true,
    budget: { min: 300, max: 580 },
    bio: "Estudiante de ingenier√≠a, tranquilo y sociable.",
    interests: ["Videojuegos", "Cine", "Deportes", "M√∫sica"],
    occupation: "Estudiante",
    socialLevel: 4,
    cleanlinessLevel: 3,
    acceptsSmokers: true,
    acceptsPets: true,
    acceptsGuests: true,
    languages: ["Espa√±ol"],
    photos: ["https://picsum.photos/400/300?random=31", "https://picsum.photos/400/300?random=32"]
  }
];

async function seedDatabase() {
  const client = new Client({
    connectionString: process.env.DATABASE_URL || 'postgresql://citus:Roomiefy2301@c-roomies-postgres-db.t66x6mz43vydno.postgres.cosmos.azure.com:5432/roomies_db?sslmode=require',
    ssl: {
      rejectUnauthorized: false
    }
  });

  try {
    await client.connect();
    console.log('üîó Conectado a la base de datos Azure Cosmos DB');

    // Limpiar datos existentes
    await client.query('DELETE FROM roomies');
    console.log('üßπ Datos existentes eliminados');

    // Insertar datos de muestra
    for (const roomie of sampleRoomies) {
      const query = `
        INSERT INTO roomies (
          id, name, age, avatar, verified, rating, reviews, location,
          "hasApartment", budget, bio, interests, occupation, "socialLevel",
          "cleanlinessLevel", "acceptsSmokers", "acceptsPets", "acceptsGuests",
          languages, photos, "createdAt"
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21)
      `;

      const values = [
        roomie.id, roomie.name, roomie.age, roomie.avatar, roomie.verified,
        roomie.rating, roomie.reviews, roomie.location, roomie.hasApartment,
        JSON.stringify(roomie.budget), roomie.bio, JSON.stringify(roomie.interests),
        roomie.occupation, roomie.socialLevel, roomie.cleanlinessLevel,
        roomie.acceptsSmokers, roomie.acceptsPets, roomie.acceptsGuests,
        JSON.stringify(roomie.languages), JSON.stringify(roomie.photos),
        new Date().toISOString()
      ];

      await client.query(query, values);
      console.log(`‚úÖ Roomie insertado: ${roomie.name}`);
    }

    console.log('üéâ ¬°Datos de muestra insertados exitosamente!');

    // Verificar que se insertaron correctamente
    const result = await client.query('SELECT COUNT(*) as count FROM roomies');
    console.log(`üìä Total de roomies en la base de datos: ${result.rows[0].count}`);

  } catch (error) {
    console.error('‚ùå Error al poblar la base de datos:', error.message);
    console.error('Error completo:', error);
  } finally {
    await client.end();
    console.log('üîå Conexi√≥n cerrada');
  }
}

seedDatabase();